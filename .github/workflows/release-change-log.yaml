# name: Release Changelog to Discord

# on:
#   release:
#     types: [published]

# jobs:
#   notify-discord:
#     if: github.event.release.target_commitish == 'main-inactive'
#     runs-on: ubuntu-latest

#     steps:
#     - name: Send release info to Discord
#       env:
#         DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK_URL }}
#       run: |
#         TAG_NAME="${{ github.event.release.tag_name }}"
#         URL="${{ github.event.release.html_url }}"
        
#         curl -H "Content-Type: application/json" \
#              -X POST \
#              -d "{\"embeds\": [{\"title\": \"ðŸš€ $TAG_NAME released!\", \"url\": \"$URL\", \"color\": 3447003}]}" \
#              "$DISCORD_WEBHOOK"
        
#         RELEASE_BODY=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
#                       "https://api.github.com/repos/${{ github.repository }}/releases/${{ github.event.release.id }}" | \
#                       jq -r '.body')
        
#         ESCAPED_BODY=$(echo "$RELEASE_BODY" | jq -Rs .)
        
#         curl -H "Content-Type: application/json" \
#              -X POST \
#              -d "{\"content\": $ESCAPED_BODY}" \
#              "$DISCORD_WEBHOOK"